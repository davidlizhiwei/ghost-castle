<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>æ¸¸æˆä¸­å¿ƒ</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Arial', sans-serif;
            background: linear-gradient(135deg, #0f0f23 0%, #1a1a2e 50%, #16213e 100%);
            min-height: 100vh;
            display: flex;
            justify-content: center;
            align-items: center;
            overflow: hidden;
        }

        #game-selector {
            text-align: center;
            padding: 40px;
        }

        h1 {
            font-size: 3em;
            color: #fff;
            margin-bottom: 50px;
            text-shadow: 0 0 30px rgba(139, 92, 246, 0.8);
            animation: glow 2s ease-in-out infinite alternate;
        }

        @keyframes glow {
            from { text-shadow: 0 0 20px rgba(139, 92, 246, 0.8), 0 0 40px rgba(109, 40, 217, 0.6); }
            to { text-shadow: 0 0 30px rgba(167, 139, 250, 1), 0 0 60px rgba(124, 58, 237, 0.8); }
        }

        .games-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(280px, 1fr));
            gap: 30px;
            max-width: 800px;
            margin: 0 auto;
        }

        .game-card {
            background: rgba(255, 255, 255, 0.05);
            border-radius: 20px;
            padding: 30px;
            cursor: pointer;
            transition: all 0.4s ease;
            border: 2px solid rgba(139, 92, 246, 0.3);
            backdrop-filter: blur(10px);
        }

        .game-card:hover {
            transform: translateY(-10px);
            border-color: rgba(139, 92, 246, 0.8);
            box-shadow: 0 20px 40px rgba(139, 92, 246, 0.4);
            background: rgba(255, 255, 255, 0.1);
        }

        .game-icon {
            font-size: 4em;
            margin-bottom: 20px;
            display: block;
        }

        .game-card h2 {
            color: #fff;
            font-size: 1.5em;
            margin-bottom: 10px;
        }

        .game-card p {
            color: #c4b5fd;
            font-size: 0.95em;
            line-height: 1.5;
        }

        /* ç²’å­èƒŒæ™¯ */
        .particles {
            position: fixed;
            width: 100%;
            height: 100%;
            overflow: hidden;
            pointer-events: none;
            z-index: -1;
        }

        .particle {
            position: absolute;
            width: 8px;
            height: 8px;
            background: rgba(139, 92, 246, 0.4);
            border-radius: 50%;
            animation: float 15s infinite;
        }

        @keyframes float {
            0%, 100% {
                transform: translateY(100vh) rotate(0deg);
                opacity: 0;
            }
            10% { opacity: 1; }
            90% { opacity: 1; }
            100% {
                transform: translateY(-100vh) rotate(720deg);
                opacity: 0;
            }
        }

        /* è¿”å›æŒ‰é’®æ ·å¼ */
        #back-btn {
            position: fixed;
            top: 20px;
            left: 20px;
            padding: 12px 25px;
            font-size: 1em;
            background: linear-gradient(45deg, #4c1d95, #6d28d9);
            border: 2px solid #8b5cf6;
            border-radius: 10px;
            color: white;
            cursor: pointer;
            transition: all 0.3s;
            z-index: 1000;
            display: none;
        }

        #back-btn:hover {
            background: linear-gradient(45deg, #6d28d9, #8b5cf6);
            transform: translateX(-5px);
        }
    </style>
</head>
<body>
    <!-- ç²’å­èƒŒæ™¯ -->
    <div class="particles" id="particles"></div>

    <!-- è¿”å›æŒ‰é’® -->
    <button id="back-btn" onclick="showGameSelector()">ğŸ”™ è¿”å›æ¸¸æˆé€‰æ‹©</button>

    <!-- æ¸¸æˆé€‰æ‹©å™¨ -->
    <div id="game-selector">
        <h1>ğŸ® æ¸¸æˆä¸­å¿ƒ ğŸ®</h1>
        <div class="games-grid">
            <div class="game-card" onclick="loadGame('ghost-castle')">
                <span class="game-icon">ğŸ°</span>
                <h2>å¹½çµå¤å ¡æ¢é™©</h2>
                <p>æ¢ç´¢ç¥ç§˜å¤å ¡ï¼Œæ”¶é›† 5 ä¸ªé­”æ³•æ°´æ™¶ï¼Œèº²é¿å¹½çµï¼ŒæˆåŠŸé€ƒè„±ï¼</p>
            </div>
            <div class="game-card" onclick="loadGame('lucky-wheel')">
                <span class="game-icon">ğŸ°</span>
                <h2>å¹¸è¿å¤§è½¬ç›˜</h2>
                <p>è½¬åŠ¨å¹¸è¿è½¬ç›˜ï¼Œèµ¢å–ä¸°åšå¥–å“ï¼æ”¯æŒè‡ªå®šä¹‰å¥–å“å’Œåº†ç¥ç‰¹æ•ˆã€‚</p>
            </div>
        </div>
    </div>

    <!-- å¹½çµå¤å ¡æ¸¸æˆå®¹å™¨ -->
    <div id="ghost-castle-container" style="display: none;"></div>

    <!-- å¹¸è¿å¤§è½¬ç›˜æ¸¸æˆå®¹å™¨ -->
    <div id="lucky-wheel-container" style="display: none;"></div>

    <script>
        // åˆ›å»ºèƒŒæ™¯ç²’å­
        function createParticles() {
            const container = document.getElementById('particles');
            for (let i = 0; i < 30; i++) {
                const particle = document.createElement('div');
                particle.className = 'particle';
                particle.style.left = Math.random() * 100 + '%';
                particle.style.animationDelay = Math.random() * 5 + 's';
                particle.style.animationDuration = (Math.random() * 10 + 10) + 's';
                container.appendChild(particle);
            }
        }
        createParticles();

        // åŠ è½½æ¸¸æˆ
        function loadGame(gameName) {
            document.getElementById('game-selector').style.display = 'none';
            document.getElementById('back-btn').style.display = 'block';

            if (gameName === 'ghost-castle') {
                loadGhostCastle();
            } else if (gameName === 'lucky-wheel') {
                loadLuckyWheel();
            }
        }

        // æ˜¾ç¤ºæ¸¸æˆé€‰æ‹©å™¨
        function showGameSelector() {
            document.getElementById('game-selector').style.display = 'block';
            document.getElementById('back-btn').style.display = 'none';
            document.getElementById('ghost-castle-container').style.display = 'none';
            document.getElementById('lucky-wheel-container').style.display = 'none';
            document.getElementById('ghost-castle-container').innerHTML = '';
            document.getElementById('lucky-wheel-container').innerHTML = '';
        }

        // åŠ è½½å¹½çµå¤å ¡æ¸¸æˆ
        function loadGhostCastle() {
            const container = document.getElementById('ghost-castle-container');
            container.style.display = 'block';
            container.innerHTML = `
                <div id="game-container" style="position: relative; width: 100%; height: 100vh;">
                    <!-- å¼€å§‹ç•Œé¢ -->
                    <div id="start-screen" style="position: absolute; top: 0; left: 0; width: 100%; height: 100%; display: flex; flex-direction: column; justify-content: center; align-items: center; background: radial-gradient(ellipse at center, #2a1a4e 0%, #0a0a0a 100%); z-index: 100;">
                        <h1 style="font-size: 3em; color: #8b5cf6; text-shadow: 0 0 20px #8b5cf6, 0 0 40px #6d28d9; margin-bottom: 20px; animation: glow 2s ease-in-out infinite alternate;">ğŸ° å¹½çµå¤å ¡æ¢é™© ğŸ‘»</h1>
                        <p style="font-size: 1.2em; color: #c4b5fd; margin-bottom: 40px; text-align: center; max-width: 600px; line-height: 1.6;">ä½ è¢«å›°åœ¨ä¸€åº§ç¥ç§˜çš„å¤å ¡é‡Œ...<br>æ‰¾åˆ° 5 ä¸ªé­”æ³•æ°´æ™¶ï¼Œè§£å¼€è°œé¢˜ï¼Œé€ƒç¦»è¿™é‡Œï¼<br>ä½†è¦å°å¿ƒï¼Œå¤å ¡é‡Œä¸åªæœ‰ä½ ä¸€ä¸ªäºº...</p>
                        <button class="btn" onclick="startGame()" style="padding: 15px 40px; font-size: 1.3em; background: linear-gradient(45deg, #6d28d9, #8b5cf6); border: none; border-radius: 30px; color: white; cursor: pointer; transition: all 0.3s; box-shadow: 0 0 20px rgba(139, 92, 246, 0.5);">å¼€å§‹æ¢é™©</button>
                    </div>

                    <!-- æ¸¸æˆç•Œé¢ -->
                    <div id="game-screen" style="display: none; width: 100%; height: 100%; position: relative;">
                        <div id="room" style="position: relative; width: 100%; height: 100%; background-size: cover; background-position: center; transition: background 0.5s;">
                            <div id="flashlight" style="position: absolute; top: 0; left: 0; width: 100%; height: 100%; background: radial-gradient(circle at 50% 50%, transparent 10%, rgba(0,0,0,0.95) 50%, rgba(0,0,0,1) 100%); pointer-events: none; z-index: 10;"></div>
                            <div class="particles" id="room-particles"></div>
                        </div>

                        <div id="ui" style="position: absolute; top: 20px; left: 20px; z-index: 20; font-size: 1.2em;">
                            <div class="stat" style="background: rgba(0, 0, 0, 0.7); padding: 10px 20px; border-radius: 10px; margin-bottom: 10px; border: 2px solid #4c1d95;">ğŸ’ æ°´æ™¶ï¼š<span id="crystal-count">0</span>/5</div>
                            <div class="stat" style="background: rgba(0, 0, 0, 0.7); padding: 10px 20px; border-radius: 10px; margin-bottom: 10px; border: 2px solid #4c1d95;">â¤ï¸ ç”Ÿå‘½ï¼š<span id="health">3</span></div>
                        </div>

                        <div id="hint" onclick="showHint()" style="position: absolute; top: 20px; right: 20px; z-index: 20; background: rgba(0, 0, 0, 0.7); padding: 10px 20px; border-radius: 10px; border: 2px solid #6d28d9; color: #c4b5fd; cursor: pointer; transition: all 0.3s;">ğŸ’¡ æç¤º</div>

                        <div id="inventory" style="position: absolute; bottom: 20px; left: 20px; z-index: 20; background: rgba(0, 0, 0, 0.8); padding: 15px; border-radius: 15px; border: 2px solid #4c1d95; min-width: 200px;">
                            <h3 style="color: #a78bfa; margin-bottom: 10px;">ğŸ’ èƒŒåŒ…</h3>
                            <div id="inventory-items" style="display: flex; flex-wrap: wrap; gap: 10px;"></div>
                        </div>

                        <div id="message" style="position: absolute; bottom: 100px; left: 50%; transform: translateX(-50%); background: rgba(0, 0, 0, 0.9); padding: 20px 40px; border-radius: 15px; border: 2px solid #8b5cf6; z-index: 30; font-size: 1.2em; text-align: center; max-width: 600px; display: none;"></div>

                        <div id="choices" style="position: absolute; bottom: 20px; right: 20px; z-index: 20; display: flex; flex-direction: column; gap: 10px;"></div>
                    </div>

                    <!-- èƒœåˆ©ç•Œé¢ -->
                    <div id="win-screen" style="display: none; position: absolute; top: 0; left: 0; width: 100%; height: 100%; justify-content: center; align-items: center; flex-direction: column; background: rgba(0, 0, 0, 0.95); z-index: 200;">
                        <h2 style="font-size: 3em; color: #fbbf24; text-shadow: 0 0 30px #fbbf24; margin-bottom: 20px;">ğŸ‰ æ­å–œä½ é€ƒå‡ºæ¥äº†ï¼ğŸ‰</h2>
                        <p style="font-size: 1.5em; color: #c4b5fd; margin-bottom: 30px;">ä½ æ‰¾åˆ°äº†æ‰€æœ‰æ°´æ™¶ï¼ŒæˆåŠŸé€ƒç¦»äº†å¹½çµå¤å ¡ï¼</p>
                        <button class="btn" onclick="location.reload()" style="padding: 15px 40px; font-size: 1.3em; background: linear-gradient(45deg, #6d28d9, #8b5cf6); border: none; border-radius: 30px; color: white; cursor: pointer; transition: all 0.3s; box-shadow: 0 0 20px rgba(139, 92, 246, 0.5);">å†ç©ä¸€æ¬¡</button>
                    </div>

                    <!-- å¤±è´¥ç•Œé¢ -->
                    <div id="lose-screen" style="display: none; position: absolute; top: 0; left: 0; width: 100%; height: 100%; justify-content: center; align-items: center; flex-direction: column; background: rgba(0, 0, 0, 0.95); z-index: 200;">
                        <h2 style="font-size: 3em; color: #ef4444; text-shadow: 0 0 30px #ef4444; margin-bottom: 20px;">ğŸ˜± æ¸¸æˆç»“æŸ</h2>
                        <p style="font-size: 1.5em; color: #c4b5fd; margin-bottom: 30px;">å¹½çµæŠ“ä½äº†ä½ ...ä½ è¢«å›°åœ¨å¤å ¡é‡Œäº†</p>
                        <button class="btn" onclick="location.reload()" style="padding: 15px 40px; font-size: 1.3em; background: linear-gradient(45deg, #6d28d9, #8b5cf6); border: none; border-radius: 30px; color: white; cursor: pointer; transition: all 0.3s; box-shadow: 0 0 20px rgba(139, 92, 246, 0.5);">å†è¯•ä¸€æ¬¡</button>
                    </div>
                </div>

                <style>
                    @keyframes glow {
                        from { text-shadow: 0 0 20px #8b5cf6, 0 0 40px #6d28d9; }
                        to { text-shadow: 0 0 30px #a78bfa, 0 0 60px #7c3aed; }
                    }
                    .btn:hover { transform: scale(1.1); box-shadow: 0 0 30px rgba(139, 92, 246, 0.8); }
                    .item { width: 50px; height: 50px; background: linear-gradient(45deg, #6d28d9, #8b5cf6); border-radius: 10px; display: flex; justify-content: center; align-items: center; font-size: 1.5em; cursor: pointer; transition: transform 0.2s; }
                    .item:hover { transform: scale(1.1); }
                    .choice-btn { padding: 12px 25px; font-size: 1em; background: linear-gradient(45deg, #4c1d95, #6d28d9); border: 2px solid #8b5cf6; border-radius: 10px; color: white; cursor: pointer; transition: all 0.3s; }
                    .choice-btn:hover { background: linear-gradient(45deg, #6d28d9, #8b5cf6); transform: translateX(-5px); }
                    .ghost { position: absolute; font-size: 4em; animation: float 3s ease-in-out infinite; cursor: pointer; z-index: 15; filter: drop-shadow(0 0 20px rgba(139, 92, 246, 0.8)); }
                    @keyframes float { 0%, 100% { transform: translateY(0) rotate(-5deg); } 50% { transform: translateY(-20px) rotate(5deg); } }
                    .jump-scare { animation: jumpscare 0.5s ease-in-out; }
                    @keyframes jumpscare { 0% { transform: scale(0.1); opacity: 0; } 50% { transform: scale(1.5); opacity: 1; } 100% { transform: scale(1); opacity: 1; } }
                    .particles-ghost { position: absolute; width: 100%; height: 100%; overflow: hidden; pointer-events: none; }
                    .particle-ghost { position: absolute; width: 10px; height: 10px; background: rgba(139, 92, 246, 0.6); border-radius: 50%; animation: fall linear infinite; }
                    @keyframes fall { to { transform: translateY(100vh) rotate(360deg); } }
                </style>

                <script>
                    // æ¸¸æˆçŠ¶æ€
                    let gameState = {
                        currentRoom: 'entrance',
                        crystals: 0,
                        health: 3,
                        inventory: [],
                        flags: {}
                    };

                    // æˆ¿é—´æ•°æ®
                    const rooms = {
                        entrance: {
                            name: 'ğŸšª å…¥å£å¤§å…',
                            bg: 'linear-gradient(to bottom, #2a1a4e 0%, #0a0a0a 100%)',
                            description: 'ä½ ç«™åœ¨é˜´æ£®çš„å¤§å…é‡Œï¼Œå››å‘¨æŒ‚ç€å¤è€çš„ç”»åƒï¼Œä¼¼ä¹åœ¨ç›¯ç€ä½ çœ‹...',
                            choices: [
                                { text: 'ğŸ“– å»å›¾ä¹¦é¦†', to: 'library' },
                                { text: 'ğŸ½ï¸ å»é¤å…', to: 'dining' },
                                { text: 'ğŸªœ ä¸Šæ¥¼æ¢¯', to: 'hallway', req: 'key' }
                            ],
                            items: [],
                            ghost: false
                        },
                        library: {
                            name: 'ğŸ“š å›¾ä¹¦é¦†',
                            bg: 'linear-gradient(to bottom, #1a0a3e 0%, #0a0a0a 100%)',
                            description: 'ä¹¦æ¶ä¸Šæ‘†æ»¡äº†å¤è€çš„ä¹¦ç±ï¼Œä¸€æœ¬å‘å…‰çš„ä¹¦å¸å¼•äº†ä½ çš„æ³¨æ„...',
                            choices: [
                                { text: 'ğŸ“– æŸ¥çœ‹å‘å…‰çš„ä¹¦', action: 'book' },
                                { text: 'ğŸ”™ è¿”å›å¤§å…', to: 'entrance' },
                                { text: 'ğŸ”¦ æœç´¢ä¹¦æ¶', action: 'search_shelves' }
                            ],
                            items: ['crystal'],
                            ghost: true,
                            ghostChance: 0.3
                        },
                        dining: {
                            name: 'ğŸ½ï¸ é¤å…',
                            bg: 'linear-gradient(to bottom, #1a0a2e 0%, #0a0a0a 100%)',
                            description: 'é•¿æ¡Œä¸Šæ‘†æ»¡äº†è…çƒ‚çš„é£Ÿç‰©ï¼Œä¸€åªä¹Œé¸¦ç«™åœ¨åŠç¯ä¸Šçœ‹ç€ä½ ...',
                            choices: [
                                { text: 'ğŸ”‘ æ£€æŸ¥æ©±æŸœ', action: 'cabinet' },
                                { text: 'ğŸ”™ è¿”å›å¤§å…', to: 'entrance' },
                                { text: 'ğŸ– æŸ¥çœ‹é¤æ¡Œ', action: 'table' }
                            ],
                            items: ['key'],
                            ghost: true,
                            ghostChance: 0.4
                        },
                        hallway: {
                            name: 'ğŸªœ äºŒæ¥¼èµ°å»Š',
                            bg: 'linear-gradient(to bottom, #2a0a4e 0%, #0a0a0a 100%)',
                            description: 'èµ°å»Šå¾ˆé•¿ï¼Œä¸¤è¾¹æœ‰å¾ˆå¤šé—¨ã€‚ä¸€é˜µå†·é£å¹è¿‡...',
                            choices: [
                                { text: 'ğŸ›ï¸ è¿›å…¥å§å®¤', to: 'bedroom' },
                                { text: 'ğŸ”¬ è¿›å…¥å®éªŒå®¤', to: 'lab' },
                                { text: 'ğŸ”™ ä¸‹æ¥¼', to: 'entrance' }
                            ],
                            items: [],
                            ghost: true,
                            ghostChance: 0.5
                        },
                        bedroom: {
                            name: 'ğŸ›ï¸ å¤è€å§å®¤',
                            bg: 'linear-gradient(to bottom, #1a0a3e 0%, #0a0a0a 100%)',
                            description: 'ä¸€å¼ å¤è€çš„å››æŸ±åºŠï¼Œé•œå­ä¸­ä¼¼ä¹æœ‰ä»€ä¹ˆåœ¨åŠ¨...',
                            choices: [
                                { text: 'ğŸ’ æ£€æŸ¥æ°´æ™¶', action: 'crystal2' },
                                { text: 'ğŸª æŸ¥çœ‹é•œå­', action: 'mirror' },
                                { text: 'ğŸ”™ è¿”å›èµ°å»Š', to: 'hallway' }
                            ],
                            items: ['crystal'],
                            ghost: true,
                            ghostChance: 0.3
                        },
                        lab: {
                            name: 'ğŸ”¬ ç¥ç§˜å®éªŒå®¤',
                            bg: 'linear-gradient(to bottom, #0a1a3e 0%, #0a0a0a 100%)',
                            description: 'æ¡Œå­ä¸Šæ‘†æ»¡äº†å¥‡æ€ªçš„è¯æ°´å’Œä»ªå™¨ï¼Œä¸€ä¸ªéª·é«…å‘ä½ èµ°æ¥...',
                            choices: [
                                { text: 'ğŸ’€ å’Œéª·é«…å¯¹è¯', action: 'skeleton' },
                                { text: 'ğŸ§ª æ£€æŸ¥è¯æ°´', action: 'potions' },
                                { text: 'ğŸ”™ è¿”å›èµ°å»Š', to: 'hallway' }
                            ],
                            items: ['crystal'],
                            ghost: true,
                            ghostChance: 0.6
                        },
                        secret: {
                            name: 'ğŸ—ï¸ ç§˜å¯†æˆ¿é—´',
                            bg: 'linear-gradient(to bottom, #3a0a5e 0%, #0a0a0a 100%)',
                            description: 'ä½ å‘ç°äº†éšè—çš„ç§˜å¯†æˆ¿é—´ï¼æœ€åçš„æ°´æ™¶å°±åœ¨è¿™é‡Œï¼',
                            choices: [
                                { text: 'ğŸ’ å–å¾—æ°´æ™¶', action: 'final_crystal' }
                            ],
                            items: ['crystal'],
                            ghost: false
                        },
                        crypt: {
                            name: 'ğŸ’€ åœ°ä¸‹å¢“ç©´',
                            bg: 'linear-gradient(to bottom, #0a0a0a 0%, #1a0a1e 100%)',
                            description: 'é˜´æ£®çš„å¢“ç©´ï¼Œå››å‘¨éƒ½æ˜¯å¢“ç¢‘ã€‚ä¸€ä¸ªå¹½çµåœ¨é£˜è¡...',
                            choices: [
                                { text: 'âš°ï¸ æ£€æŸ¥çŸ³æ£º', action: 'coffin' },
                                { text: 'ğŸ”™ é€ƒè·‘', to: 'entrance' }
                            ],
                            items: ['crystal'],
                            ghost: true,
                            ghostChance: 0.7
                        }
                    };

                    // éŸ³æ•ˆæ¨¡æ‹Ÿï¼ˆè§†è§‰åé¦ˆï¼‰
                    function playSound(type) {
                        const flash = document.createElement('div');
                        flash.style.cssText = \`position: fixed; top: 0; left: 0; width: 100%; height: 100%; background: \${type === 'scare' ? 'rgba(255,0,0,0.3)' : 'rgba(139,92,246,0.3)'}; z-index: 1000; pointer-events: none;\`;
                        document.body.appendChild(flash);
                        setTimeout(() => flash.remove(), 200);
                    }

                    // æ˜¾ç¤ºæ¶ˆæ¯
                    function showMessage(text, duration = 2000) {
                        const msg = document.getElementById('message');
                        msg.textContent = text;
                        msg.style.display = 'block';
                        setTimeout(() => msg.style.display = 'none', duration);
                    }

                    // æ›´æ–° UI
                    function updateUI() {
                        document.getElementById('crystal-count').textContent = gameState.crystals;
                        document.getElementById('health').textContent = gameState.health;
                        const inv = document.getElementById('inventory-items');
                        inv.innerHTML = '';
                        gameState.inventory.forEach(item => {
                            const div = document.createElement('div');
                            div.className = 'item';
                            div.textContent = item === 'key' ? 'ğŸ”‘' : item === 'crystal' ? 'ğŸ’' : 'ğŸ“œ';
                            div.title = item === 'key' ? 'å¤å ¡é’¥åŒ™' : item === 'crystal' ? 'é­”æ³•æ°´æ™¶' : 'å¤è€å·è½´';
                            inv.appendChild(div);
                        });
                    }

                    // å¹½çµå‡ºç°
                    function showGhost() {
                        const room = document.getElementById('room');
                        const ghost = document.createElement('div');
                        ghost.className = 'ghost jump-scare';
                        ghost.textContent = ['ğŸ‘»', 'ğŸ’€', 'ğŸ‘½', 'ğŸƒ'][Math.floor(Math.random() * 4)];
                        ghost.style.left = Math.random() * 60 + 20 + '%';
                        ghost.style.top = Math.random() * 40 + 30 + '%';
                        room.appendChild(ghost);
                        playSound('scare');
                        gameState.health--;
                        updateUI();
                        setTimeout(() => {
                            ghost.remove();
                            if (gameState.health <= 0) {
                                gameOver();
                            }
                        }, 1000);
                    }

                    // æ¸²æŸ“æˆ¿é—´
                    function renderRoom() {
                        const room = rooms[gameState.currentRoom];
                        const roomDiv = document.getElementById('room');
                        roomDiv.style.background = room.bg;
                        const choicesDiv = document.getElementById('choices');
                        choicesDiv.innerHTML = '';
                        room.choices.forEach(choice => {
                            if (choice.req && !gameState.inventory.includes(choice.req)) {
                                return;
                            }
                            const btn = document.createElement('button');
                            btn.className = 'choice-btn';
                            btn.textContent = choice.text;
                            btn.onclick = () => handleChoice(choice);
                            choicesDiv.appendChild(btn);
                        });
                        if (room.ghost && Math.random() < (room.ghostChance || 0.3)) {
                            setTimeout(showGhost, 500);
                        }
                        showMessage(room.description);
                    }

                    // å¤„ç†é€‰æ‹©
                    function handleChoice(choice) {
                        if (choice.to) {
                            gameState.currentRoom = choice.to;
                            renderRoom();
                            return;
                        }
                        if (choice.action) {
                            handleAction(choice.action);
                        }
                    }

                    // å¤„ç†åŠ¨ä½œ
                    function handleAction(action) {
                        switch(action) {
                            case 'book':
                                if (!gameState.flags.bookRead) {
                                    showMessage('ğŸ“– ä¹¦ä¸Šå†™ç€ï¼š"å¯»æ‰¾éšè—åœ¨é»‘æš—ä¸­çš„å…‰èŠ’"... ä½ è·å¾—äº†ä¸€ä¸ªæ°´æ™¶ï¼', 3000);
                                    gameState.crystals++;
                                    gameState.flags.bookRead = true;
                                    updateUI();
                                    checkWin();
                                } else {
                                    showMessage('ä½ å·²ç»è¯»è¿‡è¿™æœ¬ä¹¦äº†', 1500);
                                }
                                break;
                            case 'search_shelves':
                                if (!gameState.flags.shelvesSearched) {
                                    showMessage('ğŸ”¦ ä½ åœ¨ä¹¦æ¶åé¢å‘ç°äº†ä¸€å¼ å¤è€çš„åœ°å›¾ï¼', 2000);
                                    gameState.inventory.push('map');
                                    gameState.flags.shelvesSearched = true;
                                    updateUI();
                                } else {
                                    showMessage('ä¹¦æ¶å·²ç»è¢«æœç´¢è¿‡äº†', 1500);
                                }
                                break;
                            case 'cabinet':
                                if (!gameState.flags.cabinetOpened) {
                                    showMessage('ğŸ”‘ ä½ åœ¨æ©±æŸœé‡Œæ‰¾åˆ°äº†ä¸€æŠŠå¤è€çš„é’¥åŒ™ï¼', 2000);
                                    gameState.inventory.push('key');
                                    gameState.flags.cabinetOpened = true;
                                    updateUI();
                                } else {
                                    showMessage('æ©±æŸœå·²ç»ç©ºäº†', 1500);
                                }
                                break;
                            case 'table':
                                showMessage('ğŸ– é£Ÿç‰©å·²ç»è…çƒ‚äº†ï¼Œä½†ä½ åœ¨æ¡Œä¸‹å‘ç°äº†ä¸€äº›é‡‘å¸', 2000);
                                break;
                            case 'crystal2':
                                if (!gameState.flags.crystal2Taken) {
                                    showMessage('ğŸ’ ä½ ä»åºŠå¤´æŸœé‡Œæ‰¾åˆ°äº†ä¸€ä¸ªå‘å…‰çš„æ°´æ™¶ï¼', 2000);
                                    gameState.crystals++;
                                    gameState.flags.crystal2Taken = true;
                                    updateUI();
                                    checkWin();
                                } else {
                                    showMessage('æ°´æ™¶å·²ç»è¢«æ‹¿èµ°äº†', 1500);
                                }
                                break;
                            case 'mirror':
                                if (!gameState.flags.mirrorUsed) {
                                    showMessage('ğŸª é•œå­ä¸­æ˜¾ç¤ºå‡ºä¸€ä¸ªéšè—çš„æˆ¿é—´å…¥å£...åœ¨å›¾ä¹¦é¦†ï¼', 2500);
                                    gameState.flags.mirrorUsed = true;
                                    rooms.library.choices.push({ text: 'ğŸ—ï¸ è¿›å…¥ç§˜å¯†æˆ¿é—´', to: 'secret', req: 'map' });
                                } else {
                                    showMessage('é•œå­å·²ç»æ­ç¤ºäº†ç§˜å¯†', 1500);
                                }
                                break;
                            case 'skeleton':
                                showMessage('ğŸ’€ éª·é«…è¯´ï¼š"æƒ³è¦æ°´æ™¶ï¼Œå…ˆå›ç­”æˆ‘çš„é—®é¢˜ï¼šä»€ä¹ˆè¶Šæ´—è¶Šè„ï¼Ÿ"... ç­”æ¡ˆæ˜¯"æ°´"ï¼ä½ è·å¾—äº†æ°´æ™¶ï¼', 3000);
                                gameState.crystals++;
                                gameState.flags.skeletonTalked = true;
                                updateUI();
                                checkWin();
                                break;
                            case 'potions':
                                if (!gameState.flags.potionsChecked) {
                                    showMessage('ğŸ§ª ä½ å–ä¸‹äº†ä¸€ç“¶çº¢è‰²è¯æ°´...æ„Ÿè§‰å……æ»¡äº†åŠ›é‡ï¼ç”Ÿå‘½ +1', 2000);
                                    gameState.health++;
                                    gameState.flags.potionsChecked = true;
                                    updateUI();
                                } else {
                                    showMessage('è¯æ°´å·²ç»å–å®Œäº†', 1500);
                                }
                                break;
                            case 'final_crystal':
                                showMessage('ğŸ’ ä½ æ‰¾åˆ°äº†æœ€åçš„æ°´æ™¶ï¼å¤å ¡å¼€å§‹éœ‡åŠ¨...', 2000);
                                gameState.crystals++;
                                updateUI();
                                setTimeout(() => {
                                    document.getElementById('game-screen').style.display = 'none';
                                    document.getElementById('win-screen').style.display = 'flex';
                                    createWinParticles();
                                }, 2000);
                                break;
                            case 'coffin':
                                if (!gameState.flags.coffinOpened) {
                                    showMessage('âš°ï¸ çŸ³æ£ºé‡Œæœ‰ä¸€ä¸ªå‘å…‰çš„æ°´æ™¶ï¼ä½ æ‹¿åˆ°äº†ï¼', 2000);
                                    gameState.crystals++;
                                    gameState.flags.coffinOpened = true;
                                    updateUI();
                                    checkWin();
                                } else {
                                    showMessage('çŸ³æ£ºå·²ç»ç©ºäº†', 1500);
                                }
                                break;
                        }
                    }

                    // æ£€æŸ¥èƒœåˆ©
                    function checkWin() {
                        if (gameState.crystals >= 5) {
                            if (gameState.currentRoom === 'secret') {
                                return;
                            }
                            showMessage('ğŸ’ ä½ æ”¶é›†äº†æ‰€æœ‰æ°´æ™¶ï¼æ‰¾åˆ°å‡ºå£é€ƒç¦»è¿™é‡Œï¼', 3000);
                            const choicesDiv = document.getElementById('choices');
                            const exitBtn = document.createElement('button');
                            exitBtn.className = 'choice-btn';
                            exitBtn.textContent = 'ğŸšª é€ƒç¦»å¤å ¡';
                            exitBtn.onclick = () => {
                                document.getElementById('game-screen').style.display = 'none';
                                document.getElementById('win-screen').style.display = 'flex';
                                createWinParticles();
                            };
                            choicesDiv.appendChild(exitBtn);
                        }
                    }

                    // æ¸¸æˆç»“æŸ
                    function gameOver() {
                        document.getElementById('game-screen').style.display = 'none';
                        document.getElementById('lose-screen').style.display = 'flex';
                    }

                    // æ˜¾ç¤ºæç¤º
                    function showHint() {
                        const hints = [
                            'ğŸ’¡ å¤šå’Œåœºæ™¯ä¸­çš„ç‰©å“äº’åŠ¨ï¼Œå¯èƒ½ä¼šæœ‰å‘ç°',
                            'ğŸ’¡ æœ‰äº›é—¨éœ€è¦é’¥åŒ™æ‰èƒ½æ‰“å¼€',
                            'ğŸ’¡ é•œå­å¯èƒ½ä¼šæ­ç¤ºéšè—çš„ç§˜å¯†',
                            'ğŸ’¡ éª·é«…çŸ¥é“ä¸€äº›é‡è¦çš„äº‹æƒ…...',
                            'ğŸ’¡ æ”¶é›†æ‰€æœ‰ 5 ä¸ªæ°´æ™¶æ‰èƒ½é€ƒè„±'
                        ];
                        showMessage(hints[Math.floor(Math.random() * hints.length)], 3000);
                    }

                    // åˆ›å»ºèƒœåˆ©ç²’å­æ•ˆæœ
                    function createWinParticles() {
                        const winScreen = document.getElementById('win-screen');
                        const particles = document.createElement('div');
                        particles.className = 'particles-ghost';
                        winScreen.appendChild(particles);
                        for (let i = 0; i < 50; i++) {
                            const particle = document.createElement('div');
                            particle.className = 'particle-ghost';
                            particle.style.left = Math.random() * 100 + '%';
                            particle.style.animationDelay = Math.random() * 2 + 's';
                            particle.style.animationDuration = (Math.random() * 2 + 2) + 's';
                            particles.appendChild(particle);
                        }
                    }

                    // å¼€å§‹æ¸¸æˆ
                    function startGame() {
                        document.getElementById('start-screen').style.display = 'none';
                        document.getElementById('game-screen').style.display = 'block';
                        renderRoom();
                        updateUI();
                    }
                <\/script>
            `;
        }

        // åŠ è½½å¹¸è¿å¤§è½¬ç›˜æ¸¸æˆ
        function loadLuckyWheel() {
            const container = document.getElementById('lucky-wheel-container');
            container.style.display = 'block';
            container.innerHTML = \`
                <div class="container" style="text-align: center; max-width: 600px; width: 100%; padding: 20px;">
                    <h1 class="title" style="font-size: 2.5rem; color: #ffffff; margin-bottom: 30px; text-shadow: 0 0 20px rgba(255, 215, 0, 0.5); animation: glow 2s ease-in-out infinite;">ğŸ‰ å¹¸è¿å¤§è½¬ç›˜ ğŸ‰</h1>

                    <div class="wheel-container" style="position: relative; display: inline-block; margin-bottom: 30px;">
                        <div class="wheel-wrapper" style="position: relative; width: 400px; height: 400px; margin: 0 auto; filter: drop-shadow(0 10px 30px rgba(0, 0, 0, 0.3));">
                            <canvas id="wheel" width="500" height="500" style="width: 100%; height: 100%; border-radius: 50%; transition: transform 4s cubic-bezier(0.17, 0.67, 0.12, 0.99);"></canvas>
                            <div class="pointer" style="position: absolute; top: -20px; left: 50%; transform: translateX(-50%); width: 40px; height: 50px; z-index: 10;"></div>
                        </div>
                        <button id="spinBtn" class="spin-button" style="display: block; margin: 30px auto; padding: 18px 60px; font-size: 1.5rem; font-weight: bold; color: #ffffff; background: linear-gradient(135deg, #e74c3c 0%, #c0392b 100%); border: none; border-radius: 50px; cursor: pointer; box-shadow: 0 8px 25px rgba(231, 76, 60, 0.4); transition: all 0.3s ease; text-transform: uppercase; letter-spacing: 2px;">å¼€å§‹æŠ½å¥–</button>
                    </div>

                    <div id="result" class="result" style="min-height: 80px; margin: 20px 0; padding: 20px; border-radius: 15px; background: rgba(255, 255, 255, 0.1); backdrop-filter: blur(10px); border: 2px solid rgba(255, 215, 0, 0.3);"></div>

                    <div class="settings" style="margin-top: 40px; padding: 25px; background: rgba(255, 255, 255, 0.05); border-radius: 20px; border: 1px solid rgba(255, 255, 255, 0.1);">
                        <h3 style="color: #ffffff; margin-bottom: 20px; font-size: 1.3rem;">ğŸ å¥–å“è®¾ç½®</h3>
                        <div id="prizesList" class="prizes-list" style="display: grid; grid-template-columns: repeat(auto-fill, minmax(150px, 1fr)); gap: 10px; margin-bottom: 20px;"></div>
                        <button id="addPrizeBtn" class="add-btn" style="padding: 10px 25px; font-size: 1rem; border: none; border-radius: 25px; cursor: pointer; margin: 5px; background: linear-gradient(135deg, #27ae60, #229954); color: white; transition: all 0.3s ease;">+ æ·»åŠ å¥–å“</button>
                        <button id="resetBtn" class="reset-btn" style="padding: 10px 25px; font-size: 1rem; border: none; border-radius: 25px; cursor: pointer; margin: 5px; background: linear-gradient(135deg, #7f8c8d, #95a5a6); color: white; transition: all 0.3s ease;">é‡ç½®é»˜è®¤</button>
                    </div>
                </div>

                <style>
                    @keyframes glow {
                        0%, 100% { text-shadow: 0 0 20px rgba(255, 215, 0, 0.5); }
                        50% { text-shadow: 0 0 40px rgba(255, 215, 0, 0.8), 0 0 60px rgba(255, 215, 0, 0.4); }
                    }
                    .pointer::before {
                        content: '';
                        position: absolute;
                        top: 0;
                        left: 50%;
                        transform: translateX(-50%);
                        width: 0;
                        height: 0;
                        border-left: 20px solid transparent;
                        border-right: 20px solid transparent;
                        border-top: 50px solid #e74c3c;
                        filter: drop-shadow(0 4px 8px rgba(0, 0, 0, 0.3));
                    }
                    .pointer::after {
                        content: '';
                        position: absolute;
                        top: 10px;
                        left: 50%;
                        transform: translateX(-50%);
                        width: 20px;
                        height: 20px;
                        background: #ffd700;
                        border-radius: 50%;
                        box-shadow: 0 0 10px rgba(255, 215, 0, 0.8);
                    }
                    .spin-button:hover:not(:disabled) {
                        transform: translateY(-3px);
                        box-shadow: 0 12px 35px rgba(231, 76, 60, 0.6);
                    }
                    .spin-button:active:not(:disabled) { transform: translateY(0); }
                    .spin-button:disabled { opacity: 0.6; cursor: not-allowed; }
                    .result.show { animation: resultPop 0.5s ease-out; }
                    @keyframes resultPop {
                        0% { transform: scale(0.8); opacity: 0; }
                        50% { transform: scale(1.05); }
                        100% { transform: scale(1); opacity: 1; }
                    }
                    .result h2 { color: #ffd700; font-size: 1.8rem; margin-bottom: 10px; }
                    .result p { color: #ffffff; font-size: 1.3rem; }
                    .prize-item {
                        display: flex;
                        align-items: center;
                        gap: 8px;
                        padding: 10px 15px;
                        background: rgba(255, 255, 255, 0.1);
                        border-radius: 10px;
                        color: #ffffff;
                        font-size: 0.9rem;
                    }
                    .prize-color {
                        width: 20px;
                        height: 20px;
                        border-radius: 50%;
                        flex-shrink: 0;
                        border: 2px solid rgba(255, 255, 255, 0.3);
                    }
                    .prize-name { flex: 1; overflow: hidden; text-overflow: ellipsis; white-space: nowrap; }
                    .add-btn:hover, .reset-btn:hover { transform: translateY(-2px); box-shadow: 0 5px 15px rgba(127, 140, 141, 0.4); }
                    .confetti {
                        position: fixed;
                        width: 10px;
                        height: 10px;
                        background: #ffd700;
                        animation: confettiFall 3s ease-out forwards;
                        pointer-events: none;
                        z-index: 1000;
                    }
                    @keyframes confettiFall {
                        0% { transform: translateY(-100vh) rotate(0deg); opacity: 1; }
                        100% { transform: translateY(100vh) rotate(720deg); opacity: 0; }
                    }
                    @media (max-width: 500px) {
                        .wheel-wrapper { width: 300px; height: 300px; }
                        .title { font-size: 1.8rem; }
                        .spin-button { padding: 15px 40px; font-size: 1.2rem; }
                        .prizes-list { grid-template-columns: repeat(2, 1fr); }
                    }
                </style>

                <script>
                    class LuckyWheel {
                        constructor() {
                            this.canvas = document.getElementById('wheel');
                            this.ctx = this.canvas.getContext('2d');
                            this.spinBtn = document.getElementById('spinBtn');
                            this.resultDiv = document.getElementById('result');
                            this.prizesList = document.getElementById('prizesList');
                            this.addPrizeBtn = document.getElementById('addPrizeBtn');
                            this.resetBtn = document.getElementById('resetBtn');

                            this.defaultPrizes = [
                                { name: 'ä¸€ç­‰å¥–', color: '#e74c3c' },
                                { name: 'äºŒç­‰å¥–', color: '#3498db' },
                                { name: 'ä¸‰ç­‰å¥–', color: '#2ecc71' },
                                { name: 'å››ç­‰å¥–', color: '#f39c12' },
                                { name: 'äº”ç­‰å¥–', color: '#9b59b6' },
                                { name: 'å…­ç­‰å¥–', color: '#1abc9c' },
                                { name: 'ä¸ƒç­‰å¥–', color: '#e91e63' },
                                { name: 'å…«ç­‰å¥–', color: '#00bcd4' }
                            ];

                            this.prizes = JSON.parse(localStorage.getItem('luckyWheelPrizes')) || [...this.defaultPrizes];
                            this.currentRotation = 0;
                            this.isSpinning = false;

                            this.init();
                        }

                        init() {
                            this.bindEvents();
                            this.drawWheel();
                            this.renderPrizesList();
                        }

                        bindEvents() {
                            this.spinBtn.addEventListener('click', () => this.spin());
                            this.addPrizeBtn.addEventListener('click', () => this.addPrize());
                            this.resetBtn.addEventListener('click', () => this.resetPrizes());
                        }

                        drawWheel() {
                            const centerX = this.canvas.width / 2;
                            const centerY = this.canvas.height / 2;
                            const radius = Math.min(centerX, centerY) - 10;
                            const sliceAngle = (2 * Math.PI) / this.prizes.length;

                            this.ctx.clearRect(0, 0, this.canvas.width, this.canvas.height);

                            // ç»˜åˆ¶å¤–åœˆè£…é¥°
                            this.ctx.beginPath();
                            this.ctx.arc(centerX, centerY, radius + 8, 0, 2 * Math.PI);
                            this.ctx.fillStyle = '#ffd700';
                            this.ctx.fill();

                            // ç»˜åˆ¶æ¯ä¸ªæ‰‡å½¢
                            this.prizes.forEach((prize, index) => {
                                const startAngle = index * sliceAngle - Math.PI / 2;
                                const endAngle = (index + 1) * sliceAngle - Math.PI / 2;

                                // ç»˜åˆ¶æ‰‡å½¢
                                this.ctx.beginPath();
                                this.ctx.moveTo(centerX, centerY);
                                this.ctx.arc(centerX, centerY, radius, startAngle, endAngle);
                                this.ctx.closePath();

                                // æ¸å˜å¡«å……
                                const gradient = this.ctx.createRadialGradient(centerX, centerY, 0, centerX, centerY, radius);
                                gradient.addColorStop(0, this.lightenColor(prize.color, 30));
                                gradient.addColorStop(1, prize.color);
                                this.ctx.fillStyle = gradient;
                                this.ctx.fill();
                                this.ctx.strokeStyle = '#fff';
                                this.ctx.lineWidth = 2;
                                this.ctx.stroke();

                                // ç»˜åˆ¶æ–‡å­—
                                this.ctx.save();
                                this.ctx.translate(centerX, centerY);
                                this.ctx.rotate(startAngle + sliceAngle / 2);
                                this.ctx.textAlign = 'right';
                                this.ctx.fillStyle = '#fff';
                                this.ctx.font = 'bold 18px "Segoe UI", sans-serif';
                                this.ctx.shadowColor = 'rgba(0, 0, 0, 0.5)';
                                this.ctx.shadowBlur = 4;
                                this.ctx.fillText(prize.name, radius - 30, 6);
                                this.ctx.restore();
                            });

                            // ç»˜åˆ¶ä¸­å¿ƒè£…é¥°
                            this.ctx.beginPath();
                            this.ctx.arc(centerX, centerY, 30, 0, 2 * Math.PI);
                            this.ctx.fillStyle = '#ffd700';
                            this.ctx.fill();
                            this.ctx.strokeStyle = '#fff';
                            this.ctx.lineWidth = 3;
                            this.ctx.stroke();

                            // ä¸­å¿ƒæ˜Ÿæ˜Ÿ
                            this.ctx.fillStyle = '#fff';
                            this.ctx.font = 'bold 24px "Segoe UI", sans-serif';
                            this.ctx.textAlign = 'center';
                            this.ctx.textBaseline = 'middle';
                            this.ctx.fillText('â˜…', centerX, centerY);
                        }

                        spin() {
                            if (this.isSpinning) return;

                            this.isSpinning = true;
                            this.spinBtn.disabled = true;
                            this.resultDiv.innerHTML = '';
                            this.resultDiv.classList.remove('show');

                            const minSpins = 5;
                            const extraRotation = Math.random() * 2 * Math.PI;
                            const totalRotation = minSpins * 2 * Math.PI + extraRotation;
                            const targetRotation = this.currentRotation + totalRotation;

                            const startTime = performance.now();
                            const duration = 4000;
                            const startRotation = this.currentRotation;

                            const animate = (currentTime) => {
                                const elapsed = currentTime - startTime;
                                const progress = Math.min(elapsed / duration, 1);
                                const easeOut = 1 - Math.pow(1 - progress, 4);

                                this.currentRotation = startRotation + totalRotation * easeOut;
                                this.canvas.style.transform = \\\`rotate(\\\${this.currentRotation}rad)\\\`;

                                if (progress < 1) {
                                    requestAnimationFrame(animate);
                                } else {
                                    this.isSpinning = false;
                                    this.spinBtn.disabled = false;
                                    this.showResult();
                                }
                            };

                            requestAnimationFrame(animate);
                        }

                        showResult() {
                            const normalizedRotation = this.currentRotation % (2 * Math.PI);
                            const sliceAngle = (2 * Math.PI) / this.prizes.length;

                            let prizeIndex = Math.floor(((2 * Math.PI - normalizedRotation + Math.PI / 2) % (2 * Math.PI)) / sliceAngle);
                            prizeIndex = (prizeIndex + this.prizes.length) % this.prizes.length;

                            const winner = this.prizes[prizeIndex];

                            this.resultDiv.innerHTML = \\\`
                                <h2>ğŸŠ æ­å–œä½ ï¼ğŸŠ</h2>
                                <p>è·å¾—ï¼š\\\${winner.name}</p>
                            \\\`;
                            this.resultDiv.classList.add('show');

                            this.createConfetti();
                        }

                        createConfetti() {
                            const colors = ['#ffd700', '#e74c3c', '#3498db', '#2ecc71', '#f39c12', '#9b59b6'];

                            for (let i = 0; i < 50; i++) {
                                setTimeout(() => {
                                    const confetti = document.createElement('div');
                                    confetti.className = 'confetti';
                                    confetti.style.left = Math.random() * 100 + 'vw';
                                    confetti.style.background = colors[Math.floor(Math.random() * colors.length)];
                                    confetti.style.animationDuration = (Math.random() * 2 + 2) + 's';
                                    confetti.style.transform = \\\`rotate(\\\${Math.random() * 360}deg)\\\`;
                                    document.body.appendChild(confetti);

                                    setTimeout(() => confetti.remove(), 4000);
                                }, i * 30);
                            }
                        }

                        renderPrizesList() {
                            this.prizesList.innerHTML = this.prizes.map(prize => \\\`
                                <div class="prize-item">
                                    <div class="prize-color" style="background: \\\${prize.color}"></div>
                                    <span class="prize-name">\\\${prize.name}</span>
                                </div>
                            \\\`).join('');
                        }

                        addPrize() {
                            const name = prompt('è¯·è¾“å…¥å¥–å“åç§°ï¼š');
                            if (!name || name.trim() === '') return;

                            const color = '#' + Math.floor(Math.random() * 16777215).toString(16).padStart(6, '0');

                            this.prizes.push({ name: name.trim(), color });
                            this.savePrizes();
                            this.drawWheel();
                            this.renderPrizesList();
                        }

                        resetPrizes() {
                            if (confirm('ç¡®å®šè¦é‡ç½®ä¸ºé»˜è®¤å¥–å“å—ï¼Ÿ')) {
                                this.prizes = [...this.defaultPrizes];
                                this.savePrizes();
                                this.drawWheel();
                                this.renderPrizesList();
                            }
                        }

                        savePrizes() {
                            localStorage.setItem('luckyWheelPrizes', JSON.stringify(this.prizes));
                        }

                        lightenColor(color, percent) {
                            const num = parseInt(color.replace('#', ''), 16);
                            const amt = Math.round(2.55 * percent);
                            const R = Math.min(255, (num >> 16) + amt);
                            const G = Math.min(255, ((num >> 8) & 0x00FF) + amt);
                            const B = Math.min(255, (num & 0x0000FF) + amt);
                            return '#' + (0x1000000 + R * 0x10000 + G * 0x100 + B).toString(16).slice(1);
                        }
                    }

                    document.addEventListener('DOMContentLoaded', () => {
                        new LuckyWheel();
                    });
                <\/script>
            \`;
        }
    </script>
</body>
</html>
